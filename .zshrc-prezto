## Global ENV
declare -ga dotfiles=(.gemrc .vimrc .zpreztorc Brewfile com.googlecode.iterm2.plist .zshrc .zprofile .tmux.conf)
declare -g DOTFILES_HOME="$HOME/dotfiles"
export SHELL='/bin/zsh'

## Compinstall
zstyle :compinstall filename '/Users/cristian/.zshrc'
autoload -Uz compinit
compinit

## History
HISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=10000
setopt beep
setopt inc_append_history
setopt share_history
autoload colors && colors

## Prezto init
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

## Theme powerlevel9k config
POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(user dir rbenv vcs)
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status root_indicator load command_execution_time time)
POWERLEVEL9K_COMMAND_EXECUTION_TIME_THRESHOLD=0.5 # Show execution time if > 0.5s
# Truncate dir /usr/share/plasma -> /u/s/plasma
POWERLEVEL9K_SHORTEN_DIR_LENGTH=1
POWERLEVEL9K_SHORTEN_DELIMITER=""
POWERLEVEL9K_SHORTEN_STRATEGY="truncate_from_right"

## Rbenv configuration
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"

## Nodenv configuration
export PATH="$HOME/.nodenv/bin:$PATH"
eval "$(nodenv init -)"

# Pyenv configuration
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"

## Jenv configuration
export PATH="$HOME/.jenv/bin:$PATH"
eval "$(jenv init -)"

## Java version
export JAVA_OPTIONS="-Xmx2048m"
export JAVA_OPTS="-Xmx2048m"

## Functions
# Dotfiles
function dotfiles_link () {
  for file in $dotfiles; do ln -s $DOTFILES_HOME/$file ~/$file; done
}
function dotfiles_unlink () {
  for file in $dotfiles
  do
    if [[ -f "$HOME/$file" ]]
    then
      unlink "$HOME/$file"
    fi
  done
}

## Aliases
# Utils
alias ll="ls -l -A"
# Postgres
alias postgres_config="docker create --name postgres -p 5432:5432 -v "/Users/$(whoami)/code/data:/var/lib/postgresql/data" -e POSTGRES_PASSWORD=password postgres:10.6"
alias postgres_start="docker start postgres"
# Git
alias gst="git status"
alias ga="git add"
alias gd="git diff"
alias glog="git log --oneline --decorate --graph"
# Bundle
alias bi="bundle install --jobs=4"
# Tmux
alias tmuxa="tmux attach"
alias tmuxl="tmux ls"
alias tmuxn="tmux new"